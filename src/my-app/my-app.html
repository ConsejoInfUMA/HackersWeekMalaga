<link rel="import" href="../../bower_components/polymer/polymer.html"/>
<link rel="import" href="../../bower_components/polymerfire/firebase-app.html"/>
<link rel="import" href="../../bower_components/polymerfire/firebase-auth.html"/>
<link rel="import" href="../../bower_components/paper-button/paper-button.html"/>
<link rel="import" href="../../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../my-app/my-conferences.html" />

<link rel="import" href="my-icons.html">
<dom-module id="my-app">
  <template>
  <style>
    :host {
      --app-primary-color: #002932;
      --app-secondary-color: #004150;
      display: block;
    }

    app-header {
      color: white;
      height: 20%;
      background-size: contain;
      background-image:url("../../images/hackers-background.png");
      background-repeat: no-repeat;
      background-color: var(--app-primary-color);
      background-position:  center;

    }
    app-header paper-icon-button {
      --paper-icon-button-ink-color: white;
    }

    app-drawer-layout {
      /*Add that "nice" blue gradient*/
      background: rgba(255,255,255,1);
      background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 64%, rgba(0,41,50,1) 100%);
      background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(255,255,255,1)), color-stop(64%, rgba(255,255,255,1)), color-stop(100%, rgba(0,41,50,1)));
      background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 64%, rgba(0,41,50,1) 100%);
      background: -o-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 64%, rgba(0,41,50,1) 100%);
      background: -ms-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 64%, rgba(0,41,50,1) 100%);
      background: linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 64%, rgba(0,41,50,1) 100%);
      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#002932', GradientType=0 );
    }
    app-drawer {
      --app-drawer-content-container: {
        color:black;
        box-shadow: 1px 0 2px 1px rgba(0,0,0,0.18);
      }
    }

    .drawer-list {
      margin: 0 20px;

    }

    .drawer-list a {
      display: block;
      padding: 0 16px;
      text-decoration: none;
      color:inherit;
      line-height: 40px;
    }

    .drawer-list a.iron-selected {
      color:inherit;
      font-weight: bold;
    }
    .twitter-button{
      text-decoration:none;
      color:inherit;
      text-align:center;
    }
  </style>
    <!-- We link our application to firebase -->
    <firebase-app
    auth-domain= "hackersweekmalaga-ea062.firebaseapp.com"
    database-url= "https://hackersweekmalaga-ea062.firebaseio.com"
    storage-bucket= "hackersweekmalaga-ea062.appspot.com"
     api-key= "AIzaSyCA5InjLs8luFX5FZSro8fGfWtiS298NBU">
   </firebase-app>

   <firebase-auth id="auth" user="{{user}}" provider ="google" on-error ="handleError">
   </firebase-auth>



       <app-drawer-layout fullbleed>
         <!-- Drawer content -->
         <app-drawer id="drawer">
           <app-toolbar>Men√∫</app-toolbar>
           <iron-selector selected="[[page]]" attr-for-selected="name" class="drawer-list" role="navigation">
             <paper-button raised on-tap ="login">Login</paper-button>
             <paper-button raised on-tap ="logout">Logout</paper-button>
             <span>[[user.email]]</span>

           </iron-selector>
         </app-drawer>

         <!-- Modal content -->
         <paper-dialog id="modal" modal>
           <div>
               <a class ="twitter-button" href="http://ctt.ec/PxpWJ" ><paper-button><img style ="width:45px" src ="../../images/twitter.png"/>&nbsp; Compartir en Twitter</paper-button></a>
           </div>
           <div class="buttons">
             <paper-button dialog-confirm autofocus>Cerrar</paper-button>
           </div>
         </paper-dialog>


         <!-- Main content -->
         <app-header-layout has-scrolling-region>


           <app-header condenses reveals effects="waterfall  blend-background parallax-background">
             <app-toolbar>
               <paper-icon-button icon="my-icons:menu" drawer-toggle></paper-icon-button>
               <paper-icon-button icon="social:share" on-tap="_shareBtn"></paper-icon-button>
             </app-toolbar>
           </app-header>

           <my-conferences></my-conferences>



         </app-header-layout>
       </app-drawer-layout>
  </template>

  <script>
    Polymer({

      is: 'my-app',

      properties: {
        page: {
          type: String,
          reflectToAttribute: true,
          observer: '_pageChanged',
        },
        user: Object,
      },

      login: function (){
        this.$.auth.signInWithPopup();
      },

      logout: function (){
        this.$.auth.signOut();
      },
      _shareBtn: function(){
        this.$.modal.opened = true;
      },

    });
  </script>
</dom-module>
